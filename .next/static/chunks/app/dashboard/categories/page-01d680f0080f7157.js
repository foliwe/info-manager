(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[38],{2950:(e,s,t)=>{Promise.resolve().then(t.bind(t,2243))},2243:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>c});var r=t(5155),a=t(2115),n=t(2883),l=t(7917),i=t(8715),o=t(1542);let d={name:""};function c(){let{supabase:e,user:s}=(0,n._)(),[t,c]=(0,a.useState)([]),[u,m]=(0,a.useState)(!0),[f,x]=(0,a.useState)(!1),[h,g]=(0,a.useState)(!1),[b,y]=(0,a.useState)(!1),[p,v]=(0,a.useState)(d),[j,w]=(0,a.useState)(null);(0,a.useEffect)(()=>{s&&N()},[s]);let N=async()=>{if(s)try{m(!0),w(null);let{data:s,error:t}=await e.from("categories").select("*").order("name",{ascending:!0});if(t)throw t;c(s||[])}catch(e){console.error("Error fetching categories:",e),w(e.message)}finally{m(!1)}},C=async t=>{if(t.preventDefault(),s){if(!p.name.trim()){w("Category name is required");return}try{x(!0),w(null);let{error:s}=await e.from("categories").insert([{name:p.name}]);if(s)throw s;v(d),g(!1),await N()}catch(e){console.error("Error adding category:",e),w(e.message)}finally{x(!1)}}},k=async()=>{if(s&&p.id){if(!p.name.trim()){w("Category name is required");return}try{x(!0),w(null);let{error:s}=await e.from("categories").update({name:p.name}).eq("id",p.id);if(s)throw s;y(!1),await N()}catch(e){console.error("Error updating category:",e),w(e.message)}finally{x(!1)}}},S=e=>{v({id:e.id,name:e.name}),y(!0)},A=async t=>{if(s&&confirm("Are you sure you want to delete this category? This will affect any tools using this category."))try{let{error:s}=await e.from("categories").delete().eq("id",t);if(s)throw s;await N()}catch(e){console.error("Error deleting category:",e),w(e.message)}};return u?(0,r.jsx)("div",{className:"text-center",children:"Loading..."}):(0,r.jsxs)("div",{className:"space-y-6",children:[j&&(0,r.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,r.jsxs)("div",{className:"flex",children:[(0,r.jsx)("div",{className:"flex-shrink-0",children:(0,r.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm text-red-700",children:j})})]})}),(0,r.jsxs)("div",{className:"flex justify-between items-center",children:[(0,r.jsx)("h1",{className:"text-2xl font-semibold text-gray-900",children:"Categories"}),(0,r.jsx)("button",{onClick:()=>{v(d),g(!0)},className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Add Category"})]}),(0,r.jsx)("div",{className:"flex flex-col",children:(0,r.jsx)("div",{className:"-my-2 overflow-x-auto sm:-mx-6 lg:-mx-8",children:(0,r.jsx)("div",{className:"py-2 align-middle inline-block min-w-full sm:px-6 lg:px-8",children:(0,r.jsx)("div",{className:"shadow overflow-hidden border-b border-gray-200 sm:rounded-lg",children:(0,r.jsxs)("table",{className:"min-w-full divide-y divide-gray-200",children:[(0,r.jsx)("thead",{className:"bg-gray-50",children:(0,r.jsxs)("tr",{children:[(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Name"}),(0,r.jsx)("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,r.jsxs)("tr",{children:[(0,r.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.name}),(0,r.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[(0,r.jsx)("button",{onClick:()=>S(e),className:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:(0,r.jsx)(l.A,{className:"h-4 w-4","aria-hidden":"true"})}),(0,r.jsx)("button",{onClick:()=>A(e.id),className:"inline-flex items-center p-1 border border-transparent rounded-full shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:(0,r.jsx)(i.A,{className:"h-4 w-4","aria-hidden":"true"})})]})]},e.id))})]})})})})}),(0,r.jsx)(o.A,{isOpen:h,onClose:()=>{g(!1),v(d),w(null)},title:"Add Category",children:(0,r.jsxs)("form",{onSubmit:C,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"name",name:"name",value:p.name,onChange:e=>v({...p,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{g(!1),v(d),w(null)},className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:f?"Adding...":"Add Category"})]})]})}),(0,r.jsx)(o.A,{isOpen:b,onClose:()=>{y(!1),v(d),w(null)},title:"Edit Category",children:(0,r.jsxs)("form",{onSubmit:e=>{e.preventDefault(),k()},className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"edit-name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"edit-name",name:"name",value:p.name,onChange:e=>v({...p,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>{y(!1),v(d),w(null)},className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:f,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:f?"Saving...":"Save Changes"})]})]})})]})}},1542:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var r=t(5155),a=t(2115),n=t(468),l=t(864),i=t(6743);function o(e){let{isOpen:s,onClose:t,title:o,children:d}=e;return(0,r.jsx)(n.e.Root,{show:s,as:a.Fragment,children:(0,r.jsxs)(l.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,r.jsx)(n.e.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,r.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,r.jsx)(n.e.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,r.jsxs)(l.lG.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-[70%] sm:p-6",children:[(0,r.jsx)("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:(0,r.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:t,children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)(i.A,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(l.lG.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-gray-900 mb-4",children:o}),d]})]})})})})]})})}},2883:(e,s,t)=>{"use strict";t.d(s,{A:()=>o,_:()=>d});var r=t(5155),a=t(2115),n=t(9806),l=t(6046);let i=(0,a.createContext)(void 0);function o(e){let{children:s}=e,[t,o]=(0,a.useState)(null),[d]=(0,a.useState)(()=>(0,n.createClientComponentClient)()),c=(0,l.useRouter)();return(0,a.useEffect)(()=>{let{data:{subscription:e}}=d.auth.onAuthStateChange((e,s)=>{var t;o(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),"SIGNED_OUT"===e?c.replace("/login"):"SIGNED_IN"===e&&c.replace("/dashboard")});return d.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;o(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)}),()=>{e.unsubscribe()}},[d,c]),(0,r.jsx)(i.Provider,{value:{supabase:d,user:t},children:s})}let d=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}}},e=>{var s=s=>e(e.s=s);e.O(0,[833,377,441,517,358],()=>s(2950)),_N_E=e.O()}]);