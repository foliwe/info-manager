(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[954],{2265:(e,t,a)=>{Promise.resolve().then(a.bind(a,7389))},7389:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>p});var r=a(5155),n=a(2115),l=a(8173),s=a.n(l),o=a(6046);let i=n.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 9V5.25A2.25 2.25 0 0 0 13.5 3h-6a2.25 2.25 0 0 0-2.25 2.25v13.5A2.25 2.25 0 0 0 7.5 21h6a2.25 2.25 0 0 0 2.25-2.25V15m3 0 3-3m0 0-3-3m3 3H9"}))});var c=a(2883);let d=[{name:"emails",path:"/dashboard/email"},{name:"websites",path:"/dashboard/website"},{name:"my_domains",path:"/dashboard/domains"},{name:"projects",path:"/dashboard/projects"},{name:"tools",path:"/dashboard/tools"}],h=e=>{let{children:t,navigation:a}=e,l=(0,o.useRouter)(),{supabase:h,user:u}=(0,c._)(),m=(0,o.usePathname)(),[f,x]=(0,n.useState)(!1),[g,v]=(0,n.useState)({}),b=async(e,t)=>{if(h&&u)try{let{count:a}=await h.from(e).select("*",{count:"exact",head:!0}).eq("user_id",u.id);v(e=>({...e,[t]:a||0}))}catch(t){console.error("Error fetching count for ".concat(e,":"),t)}},p=async()=>{if(h&&u)try{let e={};await Promise.all(d.map(async t=>{let{count:a}=await h.from(t.name).select("*",{count:"exact",head:!0}).eq("user_id",u.id);e[t.path]=a||0})),v(e)}catch(e){console.error("Error fetching all counts:",e)}};(0,n.useEffect)(()=>{x(!0),p();let e=d.map(e=>{let t=h.channel("".concat(e.name,"_changes_").concat(Math.random()));return t.on("postgres_changes",{event:"INSERT",schema:"public",table:e.name,filter:"user_id=eq.".concat(null==u?void 0:u.id)},()=>{console.log("INSERT detected in ".concat(e.name)),b(e.name,e.path)}).on("postgres_changes",{event:"DELETE",schema:"public",table:e.name,filter:"user_id=eq.".concat(null==u?void 0:u.id)},()=>{console.log("DELETE detected in ".concat(e.name)),b(e.name,e.path)}).subscribe(t=>{console.log("Subscription status for ".concat(e.name,":"),t)}),t});return()=>{e.forEach(e=>{h.removeChannel(e)})}},[null==u?void 0:u.id]);let w=async()=>{await h.auth.signOut(),l.push("/login")};return f?(0,r.jsx)("div",{className:"min-h-screen bg-gray-100",children:(0,r.jsxs)("div",{className:"flex h-screen",children:[(0,r.jsxs)("div",{className:"w-64 bg-white shadow-lg flex flex-col",children:[(0,r.jsx)("div",{className:"flex h-16 items-center justify-center",children:(0,r.jsx)("h1",{className:"text-xl font-bold text-gray-800",children:"Info Manager"})}),(0,r.jsx)("nav",{className:"mt-5 px-2 flex-1",children:a.map(e=>{let t=m===e.href,a=g[e.href];return(0,r.jsxs)(s(),{href:e.href,className:"group flex items-center justify-between px-2 py-2 text-sm font-medium rounded-md ".concat(t?"bg-gray-100 text-gray-900":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(e.icon,{className:"mr-3 h-6 w-6 ".concat(t?"text-gray-500":"text-gray-400 group-hover:text-gray-500"),"aria-hidden":"true"}),e.name]}),void 0!==a&&a>0&&(0,r.jsx)("span",{className:"ml-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-gray-600 bg-gray-100 rounded-full",children:a})]},e.name)})}),(0,r.jsx)("div",{className:"flex-shrink-0 flex border-t border-gray-200 p-4",children:(0,r.jsx)("button",{onClick:w,className:"flex-shrink-0 w-full group block",children:(0,r.jsxs)("div",{className:"flex items-center",children:[(0,r.jsx)(i,{className:"inline-block h-5 w-5 text-gray-400 group-hover:text-gray-500"}),(0,r.jsx)("div",{className:"ml-3",children:(0,r.jsx)("p",{className:"text-sm font-medium text-gray-700 group-hover:text-gray-900",children:"Sign Out"})})]})})})]}),(0,r.jsx)("div",{className:"flex-1 overflow-auto",children:t})]})}):null},u=n.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 12 8.954-8.955c.44-.439 1.152-.439 1.591 0L21.75 12M4.5 9.75v10.125c0 .621.504 1.125 1.125 1.125H9.75v-4.875c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125V21h4.125c.621 0 1.125-.504 1.125-1.125V9.75M8.25 21h8.25"}))});var m=a(5240),f=a(7604);let x=n.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m6.115 5.19.319 1.913A6 6 0 0 0 8.11 10.36L9.75 12l-.387.775c-.217.433-.132.956.21 1.298l1.348 1.348c.21.21.329.497.329.795v1.089c0 .426.24.815.622 1.006l.153.076c.433.217.956.132 1.298-.21l.723-.723a8.7 8.7 0 0 0 2.288-4.042 1.087 1.087 0 0 0-.358-1.099l-1.33-1.108c-.251-.21-.582-.299-.905-.245l-1.17.195a1.125 1.125 0 0 1-.98-.314l-.295-.295a1.125 1.125 0 0 1 0-1.591l.13-.132a1.125 1.125 0 0 1 1.3-.21l.603.302a.809.809 0 0 0 1.086-1.086L14.25 7.5l1.256-.837a4.5 4.5 0 0 0 1.528-1.732l.146-.292M6.115 5.19A9 9 0 1 0 17.18 4.64M6.115 5.19A8.965 8.965 0 0 1 12 3c1.929 0 3.716.607 5.18 1.64"}))}),g=n.forwardRef(function(e,t){let{title:a,titleId:r,...l}=e;return n.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":r},l),a?n.createElement("title",{id:r},a):null,n.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 12.75V12A2.25 2.25 0 0 1 4.5 9.75h15A2.25 2.25 0 0 1 21.75 12v.75m-8.69-6.44-2.12-2.12a1.5 1.5 0 0 0-1.061-.44H4.5A2.25 2.25 0 0 0 2.25 6v12a2.25 2.25 0 0 0 2.25 2.25h15A2.25 2.25 0 0 0 21.75 18V9a2.25 2.25 0 0 0-2.25-2.25h-5.379a1.5 1.5 0 0 1-1.06-.44Z"}))});var v=a(1879);let b=[{name:"Dashboard",href:"/dashboard",icon:u},{name:"Emails",href:"/dashboard/email",icon:m.A},{name:"Websites",href:"/dashboard/website",icon:f.A},{name:"Domains",href:"/dashboard/domains",icon:x},{name:"Projects",href:"/dashboard/projects",icon:g},{name:"Tools",href:"/dashboard/tools",icon:v.A}];function p(e){let{children:t}=e;return(0,r.jsx)(h,{navigation:b,children:t})}},2883:(e,t,a)=>{"use strict";a.d(t,{A:()=>i,_:()=>c});var r=a(5155),n=a(2115),l=a(9806),s=a(6046);let o=(0,n.createContext)(void 0);function i(e){let{children:t}=e,[a,i]=(0,n.useState)(null),[c]=(0,n.useState)(()=>(0,l.createClientComponentClient)()),d=(0,s.useRouter)();return(0,n.useEffect)(()=>{let{data:{subscription:e}}=c.auth.onAuthStateChange((e,t)=>{var a;i(null!==(a=null==t?void 0:t.user)&&void 0!==a?a:null),"SIGNED_OUT"===e?d.replace("/login"):"SIGNED_IN"===e&&d.replace("/dashboard")});return c.auth.getSession().then(e=>{var t;let{data:{session:a}}=e;i(null!==(t=null==a?void 0:a.user)&&void 0!==t?t:null)}),()=>{e.unsubscribe()}},[c,d]),(0,r.jsx)(o.Provider,{value:{supabase:c,user:a},children:t})}let c=()=>{let e=(0,n.useContext)(o);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}}},e=>{var t=t=>e(e.s=t);e.O(0,[833,397,441,517,358],()=>t(2265)),_N_E=e.O()}]);