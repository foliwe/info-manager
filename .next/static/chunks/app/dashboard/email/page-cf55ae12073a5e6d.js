(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[266],{5480:(e,s,t)=>{Promise.resolve().then(t.bind(t,1605))},1605:(e,s,t)=>{"use strict";t.r(s),t.d(s,{default:()=>u});var a=t(5155),r=t(2115),l=t(2883),i=t(351),n=t(7917),o=t(8715),d=t(1134),c=t(1542);let m={email:"",password:"",description:""};function u(){let{supabase:e,user:s}=(0,l._)(),[t,u]=(0,r.useState)([]),[x,h]=(0,r.useState)(!0),[f,p]=(0,r.useState)(!1),[b,g]=(0,r.useState)(!1),[w,y]=(0,r.useState)(!1),[j,v]=(0,r.useState)(!1),[N,k]=(0,r.useState)(m),[C,E]=(0,r.useState)(null),[A,S]=(0,r.useState)(null),[_,F]=(0,r.useState)(!1);(0,r.useEffect)(()=>{s&&L()},[s]);let L=async()=>{if(s)try{h(!0),S(null);let{data:t,error:a}=await e.from("emails").select("*").eq("user_id",s.id).order("id",{ascending:!0});if(a)throw a;u(t||[])}catch(e){console.error("Error fetching emails:",e),S(e.message)}finally{h(!1)}},D=async t=>{if(t.preventDefault(),s){if(S(null),!N.email){S("Email address is required");return}try{p(!0),S(null);let{error:t}=await e.from("emails").insert([{...N,user_id:s.id}]);if(t)throw t;k(m),g(!1),await L()}catch(e){console.error("Error adding email:",e),S(e.message)}finally{p(!1)}}},O=async()=>{if(s&&C){if(!N.email){S("Email address is required");return}try{p(!0),S(null);let{error:t}=await e.from("emails").update({email:N.email,password:N.password,description:N.description}).eq("id",C).eq("user_id",s.id);if(t)throw t;v(!1),E(null),await L()}catch(e){console.error("Error updating email:",e),S(e.message)}finally{p(!1)}}},q=async t=>{if(s&&confirm("Are you sure you want to delete this email?"))try{let{error:a}=await e.from("emails").delete().eq("id",t).eq("user_id",s.id);if(a)throw a;await L()}catch(e){console.error("Error deleting email:",e),S(e.message)}},M=e=>{let{id:s,created_at:t,updated_at:a,user_id:r,...l}=e;k(l),E(s),v(!0)};return x?(0,a.jsx)("div",{children:"Loading..."}):(0,a.jsxs)("div",{className:"space-y-6",children:[A&&(0,a.jsx)("div",{className:"bg-red-50 border-l-4 border-red-400 p-4",children:(0,a.jsxs)("div",{className:"flex",children:[(0,a.jsx)("div",{className:"flex-shrink-0",children:(0,a.jsx)("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:(0,a.jsx)("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})})}),(0,a.jsx)("div",{className:"ml-3",children:(0,a.jsx)("p",{className:"text-sm text-red-700",children:A})})]})}),(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsx)("h2",{className:"text-2xl font-bold text-gray-900",children:"Emails"}),(0,a.jsx)("button",{onClick:()=>{k(m),g(!0)},className:"bg-blue-600 text-white px-4 py-2 rounded-md hover:bg-blue-700",children:"Add Email"})]}),(0,a.jsx)("div",{className:"overflow-x-auto",children:(0,a.jsxs)("table",{className:"min-w-full divide-y divide-gray-300",children:[(0,a.jsx)("thead",{children:(0,a.jsxs)("tr",{children:[(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Email"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Description"}),(0,a.jsx)("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),(0,a.jsx)("tbody",{className:"bg-white divide-y divide-gray-200",children:t.map(e=>(0,a.jsxs)("tr",{children:[(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.email}),(0,a.jsx)("td",{className:"px-6 py-4 whitespace-nowrap",children:e.description||(0,a.jsx)("span",{className:"text-gray-400",children:"No description"})}),(0,a.jsxs)("td",{className:"px-6 py-4 whitespace-nowrap space-x-2",children:[(0,a.jsx)("button",{onClick:()=>{k(e),y(!0)},className:"text-blue-600 hover:text-blue-900",children:(0,a.jsx)(i.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>M(e),className:"text-green-600 hover:text-green-900",children:(0,a.jsx)(n.A,{className:"h-5 w-5"})}),(0,a.jsx)("button",{onClick:()=>q(e.id),className:"text-red-600 hover:text-red-900",children:(0,a.jsx)(o.A,{className:"h-5 w-5"})})]})]},e.id))})]})}),(0,a.jsx)(c.A,{isOpen:w,onClose:()=>y(!1),title:"View Email Details",children:(0,a.jsxs)("div",{className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:N.email})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"mt-1 flex items-center",children:[(0,a.jsx)("p",{className:"text-sm text-gray-900",children:_?N.password:"••••••••"}),(0,a.jsx)("button",{onClick:()=>F(!_),className:"ml-2 text-gray-500 hover:text-gray-700",children:_?(0,a.jsx)(d.A,{className:"h-5 w-5"}):(0,a.jsx)(i.A,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:N.description||"No description"})]})]})}),(0,a.jsx)(c.A,{isOpen:j,onClose:()=>v(!1),title:"Edit Email",children:(0,a.jsxs)("form",{onSubmit:O,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"email",id:"email",value:N.email,onChange:e=>k({...N,email:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,a.jsx)("input",{type:_?"text":"password",name:"password",id:"password",value:N.password,onChange:e=>k({...N,password:e.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),(0,a.jsx)("button",{type:"button",onClick:()=>F(!_),className:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:_?(0,a.jsx)(d.A,{className:"h-5 w-5"}):(0,a.jsx)(i.A,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{name:"description",id:"description",rows:3,value:N.description,onChange:e=>k({...N,description:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>v(!1),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:f?"Saving...":"Save"})]})]})}),(0,a.jsx)(c.A,{isOpen:b,onClose:()=>g(!1),title:"Add New Email",children:(0,a.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"new-email",className:"block text-sm font-medium text-gray-700",children:"Email"}),(0,a.jsx)("input",{type:"email",name:"new-email",id:"new-email",value:N.email,onChange:e=>k({...N,email:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"new-password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,a.jsxs)("div",{className:"mt-1 flex rounded-md shadow-sm",children:[(0,a.jsx)("input",{type:_?"text":"password",name:"new-password",id:"new-password",value:N.password,onChange:e=>k({...N,password:e.target.value}),className:"block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"}),(0,a.jsx)("button",{type:"button",onClick:()=>F(!_),className:"ml-2 inline-flex items-center px-3 py-2 border border-gray-300 shadow-sm text-sm leading-4 font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:_?(0,a.jsx)(d.A,{className:"h-5 w-5"}):(0,a.jsx)(i.A,{className:"h-5 w-5"})})]})]}),(0,a.jsxs)("div",{children:[(0,a.jsx)("label",{htmlFor:"new-description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,a.jsx)("textarea",{name:"new-description",id:"new-description",rows:3,value:N.description,onChange:e=>k({...N,description:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,a.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,a.jsx)("button",{type:"button",onClick:()=>g(!1),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,a.jsx)("button",{type:"submit",disabled:f,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:f?"Adding...":"Add Email"})]})]})})]})}},1542:(e,s,t)=>{"use strict";t.d(s,{A:()=>o});var a=t(5155),r=t(2115),l=t(468),i=t(864),n=t(6743);function o(e){let{isOpen:s,onClose:t,title:o,children:d}=e;return(0,a.jsx)(l.e.Root,{show:s,as:r.Fragment,children:(0,a.jsxs)(i.lG,{as:"div",className:"relative z-50",onClose:t,children:[(0,a.jsx)(l.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,a.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,a.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,a.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,a.jsx)(l.e.Child,{as:r.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,a.jsxs)(i.lG.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-[70%] sm:p-6",children:[(0,a.jsx)("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:(0,a.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:t,children:[(0,a.jsx)("span",{className:"sr-only",children:"Close"}),(0,a.jsx)(n.A,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,a.jsxs)("div",{children:[(0,a.jsx)(i.lG.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-gray-900 mb-4",children:o}),d]})]})})})})]})})}},2883:(e,s,t)=>{"use strict";t.d(s,{A:()=>o,_:()=>d});var a=t(5155),r=t(2115),l=t(9806),i=t(6046);let n=(0,r.createContext)(void 0);function o(e){let{children:s}=e,[t,o]=(0,r.useState)(null),[d]=(0,r.useState)(()=>(0,l.createClientComponentClient)()),c=(0,i.useRouter)();return(0,r.useEffect)(()=>{let{data:{subscription:e}}=d.auth.onAuthStateChange((e,s)=>{var t;o(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null),"SIGNED_OUT"===e?c.replace("/login"):"SIGNED_IN"===e&&c.replace("/dashboard")});return d.auth.getSession().then(e=>{var s;let{data:{session:t}}=e;o(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null)}),()=>{e.unsubscribe()}},[d,c]),(0,a.jsx)(n.Provider,{value:{supabase:d,user:t},children:s})}let d=()=>{let e=(0,r.useContext)(n);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}},351:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(2115);let r=a.forwardRef(function(e,s){let{title:t,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},1134:(e,s,t)=>{"use strict";t.d(s,{A:()=>r});var a=t(2115);let r=a.forwardRef(function(e,s){let{title:t,titleId:r,...l}=e;return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:s,"aria-labelledby":r},l),t?a.createElement("title",{id:r},t):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))})}},e=>{var s=s=>e(e.s=s);e.O(0,[833,377,441,517,358],()=>s(5480)),_N_E=e.O()}]);