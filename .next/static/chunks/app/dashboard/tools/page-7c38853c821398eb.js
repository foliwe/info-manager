(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{7799:(e,t,s)=>{Promise.resolve().then(s.bind(s,8522))},8522:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>u});var r=s(5155),a=s(2115),l=s(2883),o=s(351),i=s(7917),n=s(8715),d=s(1134),c=s(1542);let m={name:"",description:"",url:"",login_details:"",password:"",category_id:void 0,category:void 0};function u(){var e;let{supabase:t,user:s}=(0,l._)(),[u,x]=(0,a.useState)([]),[h,g]=(0,a.useState)([]),[b,f]=(0,a.useState)(!0),[p,y]=(0,a.useState)(!1),[j,v]=(0,a.useState)(!1),[w,N]=(0,a.useState)(!1),[k,C]=(0,a.useState)(!1),[_,S]=(0,a.useState)(m),[A,E]=(0,a.useState)(null),[F,L]=(0,a.useState)(!1);(0,a.useEffect)(()=>{s&&(T(),D())},[s]);let T=async()=>{if(s)try{f(!0),E(null);let{data:e,error:r}=await t.from("tools").select("\n          *,\n          category:categories (*)\n        ").eq("user_id",s.id).order("name",{ascending:!0});if(r)throw r;x(e||[])}catch(e){console.error("Error fetching tools:",e),E(e.message)}finally{f(!1)}},D=async()=>{if(s)try{let{data:e,error:s}=await t.from("categories").select("*").order("name",{ascending:!0});if(s)throw s;g(e||[])}catch(e){console.error("Error fetching categories:",e),E(e.message)}},q=async e=>{if(e.preventDefault(),!s||!s.id){E("You must be logged in to add a tool");return}if(!_.name.trim()){E("Tool name is required");return}try{y(!0),E(null);let{category:e,...r}=_;console.log("Current user ID:",s.id),console.log("Tool data:",r);let{error:a}=await t.from("tools").insert([{...r,user_id:s.id}]);if(a)throw console.error("Insert error:",a),a;S(m),v(!1),await T()}catch(e){console.error("Error adding tool:",e),E(e.message)}finally{y(!1)}},O=async()=>{if(!s||!_.id){E("You must be logged in to edit a tool");return}if(!_.name.trim()){E("Tool name is required");return}try{y(!0),E(null);let{error:e}=await t.from("tools").update({name:_.name,description:_.description,url:_.url,login_details:_.login_details,password:_.password,category_id:_.category_id}).eq("id",_.id).eq("user_id",s.id);if(e)throw e;N(!1),await T()}catch(e){console.error("Error updating tool:",e),E(e.message)}finally{y(!1)}},R=e=>{S({id:e.id,name:e.name,description:e.description||"",url:e.url||"",login_details:e.login_details||"",password:e.password||"",category_id:e.category_id,category:e.category}),N(!0)},P=e=>{S({id:e.id,name:e.name,description:e.description||"",url:e.url||"",login_details:e.login_details||"",password:e.password||"",category_id:e.category_id,category:e.category}),C(!0)},G=async e=>{if(!s){E("You must be logged in to delete a tool");return}if(confirm("Are you sure you want to delete this tool?"))try{let{error:r}=await t.from("tools").delete().eq("id",e).eq("user_id",s.id);if(r)throw r;await T()}catch(e){console.error("Error deleting tool:",e),E(e.message)}};return b?(0,r.jsx)("div",{className:"flex justify-center items-center min-h-screen",children:(0,r.jsx)("div",{className:"animate-spin rounded-full h-8 w-8 border-t-2 border-b-2 border-gray-900"})}):(0,r.jsxs)("div",{className:"container mx-auto px-4 py-8",children:[(0,r.jsxs)("div",{className:"flex justify-between items-center mb-6",children:[(0,r.jsx)("h1",{className:"text-2xl font-bold text-gray-900",children:"Tools"}),(0,r.jsx)("button",{onClick:()=>{S(m),v(!0)},className:"bg-blue-500 text-white px-4 py-2 rounded hover:bg-blue-600",children:"Add Tool"})]}),A&&(0,r.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:A}),(0,r.jsx)("div",{className:"bg-white shadow-md rounded my-6",children:(0,r.jsxs)("table",{className:"min-w-full table-auto",children:[(0,r.jsx)("thead",{children:(0,r.jsxs)("tr",{className:"bg-gray-200 text-gray-600 uppercase text-sm leading-normal",children:[(0,r.jsx)("th",{className:"py-3 px-6 text-left",children:"Name"}),(0,r.jsx)("th",{className:"py-3 px-6 text-left",children:"Description"}),(0,r.jsx)("th",{className:"py-3 px-6 text-left",children:"Category"}),(0,r.jsx)("th",{className:"py-3 px-6 text-center",children:"Actions"})]})}),(0,r.jsx)("tbody",{className:"text-gray-600 text-sm",children:u.map(e=>{var t;return(0,r.jsxs)("tr",{className:"border-b border-gray-200 hover:bg-gray-100",children:[(0,r.jsx)("td",{className:"py-3 px-6 text-left",children:e.name}),(0,r.jsx)("td",{className:"py-3 px-6 text-left",children:e.description}),(0,r.jsx)("td",{className:"py-3 px-6 text-left",children:null===(t=e.category)||void 0===t?void 0:t.name}),(0,r.jsx)("td",{className:"py-3 px-6 text-center",children:(0,r.jsxs)("div",{className:"flex item-center justify-center",children:[(0,r.jsx)("button",{onClick:()=>P(e),className:"w-4 mr-4 transform hover:text-blue-500 hover:scale-110",children:(0,r.jsx)(o.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>R(e),className:"w-4 mr-4 transform hover:text-yellow-500 hover:scale-110",children:(0,r.jsx)(i.A,{className:"h-4 w-4"})}),(0,r.jsx)("button",{onClick:()=>G(e.id),className:"w-4 transform hover:text-red-500 hover:scale-110",children:(0,r.jsx)(n.A,{className:"h-4 w-4"})})]})})]},e.id)})})]})}),(0,r.jsx)(c.A,{isOpen:j,onClose:()=>v(!1),title:"Add Tool",children:(0,r.jsxs)("form",{onSubmit:q,className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"name",value:_.name,onChange:e=>S({..._,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"category",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,r.jsxs)("select",{id:"category",value:_.category_id||"",onChange:e=>S({..._,category_id:e.target.value?Number(e.target.value):void 0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),h.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,r.jsx)("textarea",{id:"description",value:_.description||"",onChange:e=>S({..._,description:e.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"url",className:"block text-sm font-medium text-gray-700",children:"URL"}),(0,r.jsx)("input",{type:"url",id:"url",value:_.url||"",onChange:e=>S({..._,url:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"https://"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"login_details",className:"block text-sm font-medium text-gray-700",children:"Login Details"}),(0,r.jsx)("input",{type:"text",id:"login_details",value:_.login_details||"",onChange:e=>S({..._,login_details:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"password",value:_.password||"",onChange:e=>S({..._,password:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>v(!1),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"submit",disabled:p,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:p?"Adding...":"Add Tool"})]})]})}),(0,r.jsx)(c.A,{isOpen:w,onClose:()=>N(!1),title:"Edit Tool",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"edit-name",className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("input",{type:"text",id:"edit-name",value:_.name,onChange:e=>S({..._,name:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",required:!0})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"edit-category",className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,r.jsxs)("select",{id:"edit-category",value:_.category_id||"",onChange:e=>S({..._,category_id:e.target.value?Number(e.target.value):void 0}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",children:[(0,r.jsx)("option",{value:"",children:"Select a category"}),h.map(e=>(0,r.jsx)("option",{value:e.id,children:e.name},e.id))]})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,r.jsx)("textarea",{id:"edit-description",value:_.description||"",onChange:e=>S({..._,description:e.target.value}),rows:3,className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"edit-url",className:"block text-sm font-medium text-gray-700",children:"URL"}),(0,r.jsx)("input",{type:"url",id:"edit-url",value:_.url||"",onChange:e=>S({..._,url:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm",placeholder:"https://"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"edit-login_details",className:"block text-sm font-medium text-gray-700",children:"Login Details"}),(0,r.jsx)("input",{type:"text",id:"edit-login_details",value:_.login_details||"",onChange:e=>S({..._,login_details:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{htmlFor:"edit-password",className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsx)("input",{type:"password",id:"edit-password",value:_.password||"",onChange:e=>S({..._,password:e.target.value}),className:"mt-1 block w-full rounded-md border-gray-300 shadow-sm focus:border-blue-500 focus:ring-blue-500 sm:text-sm"})]}),(0,r.jsxs)("div",{className:"flex justify-end space-x-3",children:[(0,r.jsx)("button",{type:"button",onClick:()=>N(!1),className:"inline-flex justify-center py-2 px-4 border border-gray-300 shadow-sm text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:"Cancel"}),(0,r.jsx)("button",{type:"button",onClick:O,disabled:p,className:"inline-flex justify-center py-2 px-4 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:p?"Saving...":"Save Changes"})]})]})}),(0,r.jsx)(c.A,{isOpen:k,onClose:()=>{C(!1),L(!1)},title:"View Tool",children:(0,r.jsxs)("div",{className:"space-y-4",children:[(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Name"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:_.name})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Description"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:_.description||"No description"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"URL"}),_.url?(0,r.jsx)("a",{href:_.url,target:"_blank",rel:"noopener noreferrer",className:"mt-1 text-sm text-blue-600 hover:text-blue-800 hover:underline block",children:_.url}):(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-400",children:"No URL provided"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Category"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:(null===(e=_.category)||void 0===e?void 0:e.name)||"No category"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Login Details"}),(0,r.jsx)("p",{className:"mt-1 text-sm text-gray-900",children:_.login_details||"No login details"})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("label",{className:"block text-sm font-medium text-gray-700",children:"Password"}),(0,r.jsxs)("div",{className:"mt-1 relative",children:[(0,r.jsx)("p",{className:"text-sm text-gray-900 pr-10",children:_.password?F?_.password:"••••••••":(0,r.jsx)("span",{className:"text-gray-400",children:"No password"})}),_.password&&(0,r.jsx)("button",{type:"button",onClick:()=>L(!F),className:"absolute right-0 top-0 p-1 text-gray-400 hover:text-gray-600",children:F?(0,r.jsx)(d.A,{className:"h-4 w-4","aria-hidden":"true"}):(0,r.jsx)(o.A,{className:"h-4 w-4","aria-hidden":"true"})})]})]})]})})]})}},1542:(e,t,s)=>{"use strict";s.d(t,{A:()=>n});var r=s(5155),a=s(2115),l=s(468),o=s(864),i=s(6743);function n(e){let{isOpen:t,onClose:s,title:n,children:d}=e;return(0,r.jsx)(l.e.Root,{show:t,as:a.Fragment,children:(0,r.jsxs)(o.lG,{as:"div",className:"relative z-50",onClose:s,children:[(0,r.jsx)(l.e.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0",enterTo:"opacity-100",leave:"ease-in duration-200",leaveFrom:"opacity-100",leaveTo:"opacity-0",children:(0,r.jsx)("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity"})}),(0,r.jsx)("div",{className:"fixed inset-0 z-10 overflow-y-auto",children:(0,r.jsx)("div",{className:"flex min-h-full items-end justify-center p-4 text-center sm:items-center sm:p-0",children:(0,r.jsx)(l.e.Child,{as:a.Fragment,enter:"ease-out duration-300",enterFrom:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",enterTo:"opacity-100 translate-y-0 sm:scale-100",leave:"ease-in duration-200",leaveFrom:"opacity-100 translate-y-0 sm:scale-100",leaveTo:"opacity-0 translate-y-4 sm:translate-y-0 sm:scale-95",children:(0,r.jsxs)(o.lG.Panel,{className:"relative transform overflow-hidden rounded-lg bg-white px-4 pb-4 pt-5 text-left shadow-xl transition-all sm:my-8 sm:w-full sm:max-w-[70%] sm:p-6",children:[(0,r.jsx)("div",{className:"absolute right-0 top-0 hidden pr-4 pt-4 sm:block",children:(0,r.jsxs)("button",{type:"button",className:"rounded-md bg-white text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-indigo-500 focus:ring-offset-2",onClick:s,children:[(0,r.jsx)("span",{className:"sr-only",children:"Close"}),(0,r.jsx)(i.A,{className:"h-6 w-6","aria-hidden":"true"})]})}),(0,r.jsxs)("div",{children:[(0,r.jsx)(o.lG.Title,{as:"h3",className:"text-lg font-semibold leading-6 text-gray-900 mb-4",children:n}),d]})]})})})})]})})}},2883:(e,t,s)=>{"use strict";s.d(t,{A:()=>n,_:()=>d});var r=s(5155),a=s(2115),l=s(9806),o=s(6046);let i=(0,a.createContext)(void 0);function n(e){let{children:t}=e,[s,n]=(0,a.useState)(null),[d]=(0,a.useState)(()=>(0,l.createClientComponentClient)()),c=(0,o.useRouter)();return(0,a.useEffect)(()=>{let{data:{subscription:e}}=d.auth.onAuthStateChange((e,t)=>{var s;n(null!==(s=null==t?void 0:t.user)&&void 0!==s?s:null),"SIGNED_OUT"===e?c.replace("/login"):"SIGNED_IN"===e&&c.replace("/dashboard")});return d.auth.getSession().then(e=>{var t;let{data:{session:s}}=e;n(null!==(t=null==s?void 0:s.user)&&void 0!==t?t:null)}),()=>{e.unsubscribe()}},[d,c]),(0,r.jsx)(i.Provider,{value:{supabase:d,user:s},children:t})}let d=()=>{let e=(0,a.useContext)(i);if(void 0===e)throw Error("useSupabase must be used inside SupabaseProvider");return e}},351:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(2115);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.036 12.322a1.012 1.012 0 0 1 0-.639C3.423 7.51 7.36 4.5 12 4.5c4.638 0 8.573 3.007 9.963 7.178.07.207.07.431 0 .639C20.577 16.49 16.64 19.5 12 19.5c-4.638 0-8.573-3.007-9.963-7.178Z"}),r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z"}))})},1134:(e,t,s)=>{"use strict";s.d(t,{A:()=>a});var r=s(2115);let a=r.forwardRef(function(e,t){let{title:s,titleId:a,...l}=e;return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},l),s?r.createElement("title",{id:a},s):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.98 8.223A10.477 10.477 0 0 0 1.934 12C3.226 16.338 7.244 19.5 12 19.5c.993 0 1.953-.138 2.863-.395M6.228 6.228A10.451 10.451 0 0 1 12 4.5c4.756 0 8.773 3.162 10.065 7.498a10.522 10.522 0 0 1-4.293 5.774M6.228 6.228 3 3m3.228 3.228 3.65 3.65m7.894 7.894L21 21m-3.228-3.228-3.65-3.65m0 0a3 3 0 1 0-4.243-4.243m4.242 4.242L9.88 9.88"}))})}},e=>{var t=t=>e(e.s=t);e.O(0,[833,377,441,517,358],()=>t(7799)),_N_E=e.O()}]);